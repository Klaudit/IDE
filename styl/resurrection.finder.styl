@import "../../Framework/themes/default/kdfn"
@import "../../Main/styl/appfn"
@import "nib/gradients"

active-color       = #1B2224
finderDimmedColor1 = #cccccc
finderDimmedColor2 = #c2c2c2
@css {
/*
FINDER stylesheet
resurrection.finder.styl
*/
}

.kdlistitemview-finderitem
  height              auto
  min-height          28px
  font-size           13px
  color               #5e7074
  noTextSelection()

  &:first-child
    margin-top        0px

  .chevron
    abs()
    top               0
    right             4px
    z-index           2
    float             none
    display           none
    margin            0
    // sprite            app '20-chevron-gray'
    size              22px 22px
    kdfsprite()
    bg                position,-180px -360px

  &.selected
    color             #ddd
    text-shadow       0 -1px 0 rgba(0,0,0,0.22)
    bg                color, finderSelectedColor1

    // I'll find a better place for it ~ GG
    .vm
      span.path-select
        display       block
        bg            position, -220px -520px
    .title
      color           #ddd
      text-shadow     none
    &+.selected
      selectedNeighbor()
    &+.jtreeview
      .kdlistitemview-finderitem
        &:first-child
          &.selected
            selectedNeighbor()

  &.unsaved
    span.icon
      color           black!important
      font-size       14px
      text-indent     -2px
      line-height     10px
      vertical-align  top
      &:before
        content       "*"

  &.selected
    span.chevron
      display       block
      bg            position,-180px -380px

  &:hover
    span.chevron
    .vm span.path-select
      display       block

  &.expanded
    > div
      span.icon
        sprite      finder '16-folder-expanded'


  &.being-inline-edited
    .chevron
      hidden()

  &.being-deleted
    background        linear-gradient(top, rgb(199,81,29) 100%,rgb(168,70,25) 44%)
    height            22px
    .kdview.delete-container
      padding         0 10px
    label
      color           white
    button.kdbutton
      margin          2px 15px 0 0
      padding         2px 4px 2px 4px
      width           auto
      font-weight     normal
      fr()

  &.items-hovering
    background        rgba(136, 183, 214, 0.25)
    text-shadow       none

  &.drop-target
    background        rgb(136, 183, 214)
    color             white
    text-shadow       none

  a.cancel
    abs()
    size            15px, 15px
    bg              position, -82px -222px
    right           5px
    top             3px
    kdfsprite()
    &:focus
    &:active
      bg            position, -62px -242px

  > div
    line-height       28px
    height            100%
    width             auto
    .title
      cursor          default
      font-weight     normal
      margin-right    40px
      display         block
      overflow        hidden
      text-overflow   ellipsis
      white-space     nowrap

    form
      height          22px

    input.kdinput.text
      margin          2px 5px 0 0
      height          17px
      line-height     1em
      border          none
      shadow          inset 0 1px 1px rgba(0,0,0,.44)
      rounded         2px
      fl()

    button.kdbutton
      margin          2px 10px 0 0
      padding         2px 4px 2px 4px
      width           auto
      font-weight     normal
      fr()

    .kdloader
      margin        5px
      fl()

    &.rename-container
      height        22px
      padding-right 25px
      input.hitenterview
        bg          image, none
        width       100%
        margin      2px 0
      a.cancel
        bg          position, -62px -242px

  .progressbar-container
    hidden()

  &.progress
    vendor          transition-duration, 100ms
    opacity         0.7
    .title
      width         70px
    .progressbar-container
      visible()
      abs           8px 30px
      size          40px 5px
      .bar
        gradient    #afafaf, #afafaf
        shadow      none
    &.being-deleted
    &.being-edited
      .progressbar-container
        hidden()
    .vm
      .vm-info
        hidden()
      .title
        width       auto
      & + .progressbar-container
        top         23px
        right       11px
        width       187px

.file-container

  .vm
  .file
  .mount
  .folder
  .broken
  .section
    font-size       13px

    span.icon
    span.arrow
      kdfsprite()
      fl()

    span.icon
    span.path-select
      margin            5px
      size              16px 16px
    span.arrow
      margin            3px 3px
      margin-left       0
      size              10px,16px
      bg                position, -1000px -1000px

  .vm
    margin-left         0 !important
    height              32px
    padding-top         1px
    padding-bottom      3px

    &.online span.icon
      bg                color, #4cd449

    span.arrow
      width             0

    span.icon
      margin            0 16px 0 0
      width             5px !important
      height            36px !important
      bg                color, #bdbdbd
      bg                image, none !important
    span.chevron
      top               3px

    span.path-select
      top               0
      size              18px,18px
      right             22px
      display           none
      bg                position, -220px -540px
      kdfsprite()
      abs()

    span.vm-info
      top               20px
      left              22px
      font-size         10px
      font-style        italic
      opacity           .7
      line-height       10px
      color             #aaa
      abs()
      a
        color           #ccc
        text-decoration none

    div.vm-toggle
      top               3px
      right             20px
      abs()

  .folder
  .mount
    span.icon
      sprite        finder '16-folder'
    span.icon.application
      sprite        finder '16-app'

  .folder
    span.icon
      &.app
        sprite      finder '16-app'

  .broken
    span.icon
      bg            position, -60px -140px

  .file
    span.icon
      sprite        finder '16-file'
      // &.code
      //   bg          position, -40px -180px
      // &.image
      //   bg          position, -40px -200px
      // &.archive
      //   bg          position, -40px -220px
      // &.new-file
      //   bg          position, -40px -240px
      // &.video
      //   bg          position, -40px -260px
      // &.sound
      //   bg          position, -40px -280px
      // &.text
      //   bg          position, -40px -300px


finderSelectedColor1 = #3AAAAB
finderSelectedColor2 = #3AAAAB

.finder.jcontextmenu

  .kdlistview-contextmenu.default
    rounded                 2px
    border                  none
    padding                 0

    .kdlistview-contextmenu.default
      margin-top            -29px
      rounded               0 2px 2px 0
      .kdlistitemview-contextitem.default
        &:first-child
          rounded             0 2px 0 0
        &:last-child
          rounded             0 0 2px 0

      &.left-aligned
        rounded             2px 0 0 2px
        .kdlistitemview-contextitem.default
          &:first-child
            rounded             2px 0 0 0
          &:last-child
            rounded             0 0 0 2px

  .kdlistitemview-contextitem.default
    font-size               .8em
    padding                 8px 10px
    border                  none

    &.selected
    &.has-sub-items.expanded
      border                none
      bg                    color, finderSelectedColor1
      color                 white
      &:first-child
        rounded             2px 2px 0 0
      &:last-child
        rounded             0 0 2px 2px
      &:hover
        bg                  color, finderSelectedColor1
      span.arrow
        border-left-color   white

    &.has-sub-items
      span.arrow
        top                 10px
        border-left-color   #31575F
    &.separator
      margin                1px 0
      padding               0
      border-bottom         1px solid #ddd
      &:hover
        border-bottom       1px solid #ddd

  > span.arrow
    z-index             9002
    size                15px 15px
    bg                  color, transparent
    kdfsprite()
    abs()
    &.top
      bg                position, -240px -560px
    &.right
      bg                position, -220px -560px
    &.bottom
      bg                position, -200px -560px
    &.left
      bg                position, -260px -560px
